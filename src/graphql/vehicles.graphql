query GetVehicleStatuses {
  vehicle_statuses(order_by: {weight: asc}) {
    ...vehicle_status
  }
}

query GetVehicles($limit: Int, $offset: Int, $condition: vehicles_bool_exp! = {}, $orderBy: [vehicles_order_by!] = {created_at: asc}) {
  vehicles(where: $condition, limit: $limit, offset: $offset, order_by: $orderBy) {
    ...vehicle
  }
  vehicles_aggregate(where: $condition) {
    aggregate {
      count
    }
  }
}

query GetVehicleById($id: uuid!) {
  vehicles_by_pk(id: $id) {
    ...vehicle
  }
}

mutation DetachVehicle($vehicleId: uuid!) {
  update_vehicles_by_pk(pk_columns: {id: $vehicleId}, _set: {owner_id: null}) {
    id
  }
}

fragment vehicle on vehicles {
  id
  created_at
  updated_at
  vin
  plate_number
  model
  year
  make
  fuel_type {
    id
    name
    code
  }
  vehicle_status {
    ...vehicle_status
  }
}

fragment fuel_type on fuel_types {
  id
  code
  name
}

fragment vehicle_status on vehicle_statuses {
  id
  code
  color
  name
  weight
}
