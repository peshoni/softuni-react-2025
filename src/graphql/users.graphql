mutation Register($user: users_insert_input!) {
	insert_users_one(object: $user) {
		...user
	}
}

query Login($email: String!, $password: String!) {
	users(where: { email: { _eq: $email }, password: { _eq: $password } }) {
		...user
	}
}

query GetUsers(
	$limit: Int
	$offset: Int
	$condition: users_bool_exp! = {}
	$orderBy: [users_order_by!] = { created_at: desc }
) {
	users(
		where: $condition
		limit: $limit
		offset: $offset
		order_by: $orderBy
	) {
		...user
	}
	users_aggregate(where: $condition) {
		aggregate {
			count
		}
	}
}

query GetAutoMechanics {
  users(where: {user_role: {code: {_eq: "autoMechanic"}}}, order_by: {created_at: desc}) {
    ...user
  }
}

query GetUserById($id: uuid!) {
	users_by_pk(id: $id) {
		...edit_user
	}
}

fragment edit_user on users {
	password
	...user
}

fragment user on users {
	id
	created_at
	updated_at
	email
	first_name
	last_name
	phone
	gender {
		...gender
	}
	user_role {
		...role
	}
}

fragment role on user_roles {
	id
	code
	name
}

fragment gender on genders {
	id
	code
	name
}
